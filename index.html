<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FM Radio Tuner</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        function FMTuner() {
            const [frequency, setFrequency] = useState(null);
            const [stationInfo, setStationInfo] = useState(null);
            const [isPlaying, setIsPlaying] = useState(false);
            const [volume, setVolume] = useState(70);

            useEffect(() => {
                const urlParams = new URLSearchParams(window.location.search);
                const freq = urlParams.get('freq');
                const station = urlParams.get('station');
                const format = urlParams.get('format');

                if (freq) {
                    const parsedFreq = parseFloat(freq);
                    if (parsedFreq >= 87.5 && parsedFreq <= 108.0) {
                        setFrequency(parsedFreq);
                        setStationInfo({
                            call: station || 'FM Radio',
                            format: format || 'Broadcasting'
                        });
                    }
                } else {
                    setFrequency(98.5);
                    setStationInfo({
                        call: 'WXYZ',
                        format: 'Classic Rock'
                    });
                }
            }, []);

            const togglePlay = () => {
                setIsPlaying(!isPlaying);
            };

            const openFMRadio = () => {
                alert(`To tune your FM radio:\n\n1. Plug in headphones (they act as antenna)\n2. Open your device's FM Radio app\n3. Tune to ${frequency} FM\n\nNote: This requires FM-enabled hardware.`);
            };

            const generateQRCodeURL = () => {
                const baseURL = window.location.origin + window.location.pathname;
                return `${baseURL}?freq=${frequency}&station=${stationInfo?.call}&format=${encodeURIComponent(stationInfo?.format || '')}`;
            };

            const shareStation = () => {
                const url = generateQRCodeURL();
                if (navigator.share) {
                    navigator.share({
                        title: `${stationInfo?.call} - ${frequency} FM`,
                        text: `Listen to ${stationInfo?.call} on ${frequency} FM`,
                        url: url
                    });
                } else {
                    navigator.clipboard.writeText(url);
                    alert('Link copied to clipboard!');
                }
            };

            const RadioIcon = () => (
                <svg className="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.348 14.651a3.75 3.75 0 010-5.303m5.304 0a3.75 3.75 0 010 5.303m-7.425 2.122a6.75 6.75 0 010-9.546m9.546 0a6.75 6.75 0 010 9.546M5.106 18.894c-3.808-3.808-3.808-9.98 0-13.789m13.788 0c3.808 3.808 3.808 9.981 0 13.79M12 12h.008v.007H12V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                </svg>
            );

            const VolumeIcon = () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" />
                </svg>
            );

            const HeadphonesIcon = () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />
                </svg>
            );

            const ShareIcon = () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
                </svg>
            );

            return (
                <div className="min-h-screen bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-500 p-4 flex items-center justify-center">
                    <div className="max-w-md w-full">
                        <div className="bg-white rounded-3xl shadow-2xl overflow-hidden">
                            <div className="bg-gradient-to-r from-indigo-600 to-purple-600 p-6 text-center">
                                <div className="flex items-center justify-center mb-3">
                                    <RadioIcon />
                                </div>
                                <h1 className="text-2xl font-bold text-white mb-1">FM Radio Tuner</h1>
                                <p className="text-white text-opacity-90 text-sm">Instant frequency access</p>
                            </div>

                            <div className="p-8">
                                <div className="text-center mb-6">
                                    <div className="bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl p-8 mb-4 shadow-lg relative overflow-hidden">
                                        <div className="absolute inset-0 bg-gradient-to-r from-indigo-500 to-purple-500 opacity-10"></div>
                                        <div className="relative">
                                            <div className="text-6xl font-bold text-white mb-2 tracking-tight">
                                                {frequency}
                                            </div>
                                            <div className="text-2xl font-semibold text-gray-300">FM</div>
                                        </div>
                                    </div>

                                    {stationInfo && (
                                        <div className="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-5 mb-4">
                                            <div className="text-3xl font-bold text-gray-800 mb-1">
                                                {stationInfo.call}
                                            </div>
                                            <div className="text-lg text-gray-600">
                                                {stationInfo.format}
                                            </div>
                                        </div>
                                    )}
                                </div>

                                <div className="space-y-3 mb-6">
                                    <button
                                        onClick={togglePlay}
                                        className={`w-full font-bold py-4 px-6 rounded-xl transition-all transform hover:scale-105 shadow-lg ${
                                            isPlaying
                                                ? 'bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white'
                                                : 'bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white'
                                        }`}
                                    >
                                        <span className="flex items-center justify-center gap-2">
                                            <VolumeIcon />
                                            {isPlaying ? 'Stop' : 'Play'} (Demo)
                                        </span>
                                    </button>

                                    <button
                                        onClick={openFMRadio}
                                        className="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-6 rounded-xl transition-all shadow-lg flex items-center justify-center gap-2"
                                    >
                                        <HeadphonesIcon />
                                        Open FM Radio App
                                    </button>
                                </div>

                                {isPlaying && (
                                    <div className="bg-gray-50 rounded-xl p-4 mb-4">
                                        <div className="flex items-center gap-3">
                                            <VolumeIcon />
                                            <input
                                                type="range"
                                                min="0"
                                                max="100"
                                                value={volume}
                                                onChange={(e) => setVolume(parseInt(e.target.value))}
                                                className="flex-1"
                                            />
                                            <span className="text-sm font-semibold text-gray-600 w-10 text-right">
                                                {volume}%
                                            </span>
                                        </div>
                                    </div>
                                )}

                                <button
                                    onClick={shareStation}
                                    className="w-full bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-3 px-6 rounded-xl transition-colors flex items-center justify-center gap-2"
                                >
                                    <ShareIcon />
                                    Share This Station
                                </button>
                            </div>
                        </div>

                        <div className="mt-6 bg-white bg-opacity-20 backdrop-blur-lg rounded-2xl p-5 text-white">
                            <p className="font-bold mb-3 text-lg">ðŸ“± How This Works</p>
                            <ol className="space-y-2 text-sm text-white text-opacity-95 list-decimal list-inside">
                                <li>QR code contains a URL with frequency parameter</li>
                                <li>Scanning opens this web app with station info</li>
                                <li>Tap "Open FM Radio App" to tune hardware radio</li>
                                <li>Or use "Play" for simulated web playback</li>
                            </ol>
                        </div>

                        <div className="mt-4 bg-white bg-opacity-10 backdrop-blur-lg rounded-xl p-4 text-white text-xs break-all">
                            <p className="font-semibold mb-2">Example QR Code URL:</p>
                            <code className="text-yellow-200">
                                {generateQRCodeURL()}
                            </code>
                        </div>

                        <div className="mt-4 space-y-2">
                            <p className="text-white text-sm font-semibold">Try other frequencies:</p>
                            <div className="grid grid-cols-3 gap-2">
                                {[
                                    { freq: 88.5, station: 'WNYC', format: 'News' },
                                    { freq: 95.5, station: 'WPLJ', format: 'Top 40' },
                                    { freq: 101.9, station: 'WXRK', format: 'Rock' }
                                ].map((s) => (
                                    <a
                                        key={s.freq}
                                        href={`?freq=${s.freq}&station=${s.station}&format=${s.format}`}
                                        className="bg-white bg-opacity-20 hover:bg-opacity-30 backdrop-blur-lg rounded-lg p-3 text-center text-white transition-all"
                                    >
                                        <div className="font-bold">{s.freq}</div>
                                        <div className="text-xs opacity-90">{s.station}</div>
                                    </a>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<FMTuner />, document.getElementById('root'));
    </script>
</body>
</html>
